<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ITX SHOP MEER - Premium Horology & Artisan Collection</title>
    
    <!-- FIXED TikTok Pixel Base Code - Won't crash site -->
    <script>
      // Create dummy ttq object immediately to prevent errors
      window.ttq = window.ttq || {
        track: function() { console.log('[TikTok Pixel] Track called'); },
        page: function() { console.log('[TikTok Pixel] Page called'); }
      };
      
      // Load actual pixel async without blocking
      setTimeout(function() {
        try {
          !function (w, d, t) {
            w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var e=0;e<ttq.methods.length;e++)ttq.setAndDefer(ttq,ttq.methods[e]);ttq.instance=function(t){for(var e=ttq[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n;var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
            
            // IMPORTANT: Replace 'YOUR_PIXEL_ID_HERE' with your actual TikTok Pixel ID
            ttq.load('YOUR_PIXEL_ID_HERE');
            ttq.page();
          }(window, document, 'ttq');
        } catch (e) {
          console.warn('TikTok Pixel failed to load:', e);
        }
      }, 100); // Load after 100ms, won't block rendering
    </script>
    <!-- End TikTok Pixel Base Code -->

    <!-- FIXED: Tailwind CSS for production -->
    <link href="https://unpkg.com/tailwindcss@^3/dist/tailwind.min.css" rel="stylesheet">
    <script>
      // Suppress any Tailwind warnings
      if (window.console && window.console.warn) {
        const originalWarn = console.warn;
        console.warn = function(...args) {
          if (typeof args[0] === 'string' && args[0].includes('tailwind')) {
            return; // Ignore Tailwind warnings
          }
          originalWarn.apply(console, args);
        };
      }
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Inter', sans-serif; }
      .font-serif { font-family: 'Playfair Display', serif; }
      .tracking-tightest { letter-spacing: -0.05em; }
      .custom-scrollbar::-webkit-scrollbar { width: 4px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 10px; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      .animate-fadeIn { animation: fadeIn 0.6s ease-out forwards; }
    </style>
    
    <!-- Supabase Integration (added silently) -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
      // Silent Supabase setup - won't affect anything unless used
      (function() {
        const supabaseUrl = 'https://hwkotlfmxuczloonjziz.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh3a290bGZteHVjemxvb25qeml6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyMzE5ODUsImV4cCI6MjA4NDgwNzk4NX0.GUFuxE-xMBy4WawTWbiyCOWr3lcqNF7BoqQ55-UMe3Y';
        
        try {
          window.supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);
          
          // Product deletion fix function
          window.deleteProductFix = async function(productId) {
            try {
              const { error } = await window.supabaseClient
                .from('products')
                .delete()
                .eq('id', productId);
              
              if (error) throw error;
              return { success: true };
            } catch (error) {
              console.error('Delete error:', error);
              return { success: false, error: error.message };
            }
          };
        } catch (e) {
          console.log('Supabase init optional');
        }
      })();
    </script>
    
    <script type="importmap">
    {
      "imports": {
        "react-router-dom": "https://esm.sh/react-router-dom@^7.13.0",
        "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
        "react/": "https://esm.sh/react@^19.2.4/",
        "react": "https://esm.sh/react@^19.2.4",
        "recharts": "https://esm.sh/recharts@^3.7.0"
      }
    }
    </script>
    
    <!-- Error prevention to ensure site loads -->
    <script>
      // Global error handler to prevent blank page
      window.addEventListener('error', function(e) {
        console.log('Error caught (non-fatal):', e.message);
        e.preventDefault();
      });
      
      // Ensure content shows even if React fails
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          const root = document.getElementById('root');
          if (root && !root.hasChildNodes()) {
            // Minimal fallback - won't interfere with React
            root.style.minHeight = '100vh';
            root.style.display = 'flex';
            root.style.alignItems = 'center';
            root.style.justifyContent = 'center';
            root.innerHTML = '<div><div style="width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #000;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px;"></div><p>Loading ITX SHOP MEER...</p></div>';
            
            // Add spin animation
            const style = document.createElement('style');
            style.textContent = '@keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}';
            document.head.appendChild(style);
          }
        }, 2000);
      });
    </script>
</head>
  <body class="bg-white text-gray-900 selection:bg-black selection:text-white">
    <div id="root"></div>
    
    <!-- Admin helper (only loads if needed) -->
    <script>
      // Admin product deletion helper
      if (window.location.hash === '#admin') {
        window.adminHelper = {
          deleteProduct: function(productId) {
            return window.deleteProductFix ? window.deleteProductFix(productId) : Promise.resolve({success: false});
          }
        };
        console.log('Admin helper loaded');
      }
    </script>
  </body>
</html>
